{% extends "layout.html.twig" %}

{% block title %}
Create Activity
{% endblock %}
{% block css %}
{% endblock %}
{% block pagename %}
Create Activity
{% endblock %}
{% block username %}
    {{ currentuser.firstname }} {{ currentuser.lastname }}
{% endblock %}

{% block content %}

  <img id="logoMain" src="{{ asset('lib/img/Serpico.png') }}" alt="logo Serpico">

      <div class="row title-desktop">
          <h4> Add participants </h4>
      </div>


{{ form_start(form) }}

    {% if form.stages|length > 1 %}
        {{ form_widget(form.diffParticipants) }}
        {{ form_errors(form.diffParticipants) }}
    {% endif %}

{% for key, stage in form.stages %}
    <div class="stage">


        <ul class="collapsible" data-collapsible="accordion">
            <li>

                {% if key == 0 %}
                    <div class="collapsible-header active">
                {% else %}
                    <div class="collapsible-header">
                {% endif %}
                    <i class="material-icons">expand_more</i>
                    <div class="stage-title">
                        <h4> {{ attribute(stagenames, key) }} (stage {{ key + 1 }})</h4>
                    </div>
                </div>

                <div class="collapsible-body">

                    <ul class="criteria">
                    {% for key, participant in stage.participants %}
                            <div class="row">
                                <div class="input-field col s12">
                                    {{ form_label(participant.firstname) }}
                                    {{ form_widget(participant.firstname) }}
                                    {{ form_errors(participant.name) }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    {{ form_label(participant.gradetype) }}
                                    {{ form_widget(criterion.gradetype) }}
                                    {{ form_errors(criterion.gradetype) }}
                                </div>
                            </div>
                            <div  class="row">
                                <div class="input-field col s3">
                                    {{ form_label(criterion.lowerbound) }}
                                    {{ form_widget(criterion.lowerbound) }}
                                    {{ form_errors(criterion.lowerbound) }}
                                </div>
                                <div class="input-field col s3">
                                    {{ form_label(criterion.upperbound) }}
                                    {{ form_widget(criterion.upperbound) }}
                                    {{ form_errors(criterion.upperbound) }}
                                </div>
                                <div class="input-field col s3">
                                    {{ form_label(criterion.step) }}
                                    {{ form_widget(criterion.step) }}
                                    {{ form_errors(criterion.step) }}
                                </div>
                                <div class="input-field col s3">
                                    {{ form_label(criterion.weight) }}
                                    {{ form_widget(criterion.weight) }}
                                    {{ form_errors(criterion.weight) }}
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    {{ form_label(criterion.comment) }}
                                    {{ form_widget(criterion.comment) }}
                                    {{ form_errors(criterion.comment) }}
                                </div>
                            </div>
                        </li>
                    {% endfor %}
                    </ul>


                </div>

            </li>
        </ul>
    </div>
{% endfor %}

</ul>
<div class="row submit-button">
    <div class="button-field col s10">
        {{ form_row(form.submit) }}
    </div>
</div>
<ul id="hiddenul" class="collection">
    <li class="collection-item"></li>
    <br><br>
</ul>

    {{ form_rest(form) }}
    {{ form_end(form)}}

{% endblock %}

{% block javascripts %}
  <script src="{{ asset('js/calendar_fix.js') }}"></script>
  <script src="{{ asset('js/activity_criterion.js') }}"></script>
{% endblock %}
